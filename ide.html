<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>iPad Uyumlu Python IDE (Monaco + Pyodide)</title>
<style>
  html, body {
    margin:0; padding:0; height:100%;
    overflow: hidden;
    -webkit-user-select: text;
    -webkit-touch-callout: default;
    touch-action: manipulation;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background-color: #1e1e1e;
    color: white;
  }
  #editor {
    width: 100%;
    height: 70vh;
  }
  #output {
    height: 30vh;
    background: #111;
    color: #0f0;
    font-family: monospace;
    padding: 10px;
    overflow-y: auto;
    white-space: pre-wrap;
    border-top: 2px solid #007acc;
  }
  #runBtn {
    position: fixed;
    top: 12px;
    right: 20px;
    z-index: 1000;
    padding: 1em 1.5em;
    font-weight: bold;
    background: #007acc;
    border: none;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    touch-action: manipulation;
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs/loader.js"></script>
<script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@microsoft/monaco-python/dist/index.js"></script>
</head>
<body>

<div id="editor"></div>
<div id="output">Çıktı burada görünecek...</div>
<button id="runBtn">▶️ Çalıştır</button>

<script>
  let pyodide = null;
  let editor = null;

  require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs' } });
  require(['vs/editor/editor.main'], function () {
    monaco.languages.python = window.monacoPython;

    editor = monaco.editor.create(document.getElementById('editor'), {
      value: `# Python kodunu buraya yaz\nfor i in range(5):\n    print(i)`,
      language: 'python',
      theme: 'vs-dark',
      automaticLayout: true,
      minimap: { enabled: false },
      fontSize: 16,
      mouseWheelZoom: true,
      accessibilitySupport: 'off',
      scrollbar: {
        verticalScrollbarSize: 14,
        horizontalScrollbarSize: 14,
        alwaysConsumeMouseWheel: true,
      },
      dragAndDrop: true,
    });

    window.monacoPython.install(monaco);
  });

  async function loadPyodideAndPackages() {
    pyodide = await loadPyodide();
  }

  async function runPythonCode() {
    const code = editor.getValue();
    try {
      // Pyodide'da print vs. çıktı için console'a yönlendirme yapalım
      let output = '';
      pyodide.globals.set('print', (msg) => {
        output += msg + '\n';
      });

      await pyodide.runPythonAsync(code);

      document.getElementById('output').textContent = output || '(Boş çıktı)';
    } catch (err) {
      document.getElementById('output').textContent = 'Hata:\n' + err;
    }
  }

  loadPyodideAndPackages();

  document.getElementById('runBtn').addEventListener('click', runPythonCode);
</script>

</body>
</html>
