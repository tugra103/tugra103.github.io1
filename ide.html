<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>VSCode Tarzı Python IDE (monaco-python + pyodide)</title>
  <style>
    html, body, #editor {
      margin:0; padding:0; height:100%;
      overflow:hidden;
    }
    #editor {
      width: 100%; height: 90vh;
    }
    #output {
      height: 10vh;
      background:#111;
      color:#0f0;
      font-family: monospace;
      padding: 0.5em 1em;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    button {
      position: fixed;
      right: 20px;
      top: 10px;
      z-index: 1000;
      padding: 0.6em 1em;
      font-weight: bold;
      background: #007acc;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs/loader.js"></script>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@microsoft/monaco-python/dist/index.js"></script>

</head>
<body>

<div id="editor"></div>
<div id="output">Çıktı burada görünecek...</div>
<button id="runBtn">▶️ Çalıştır</button>

<script>
  let pyodide = null;
  let editor = null;

  // Monaco Python eklentisini başlat
  require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs' }});
  require(['vs/editor/editor.main'], function () {
    // monaco-python'u kullanarak python dili etkinleştiriliyor
    monaco.languages.python = window.monacoPython;

    editor = monaco.editor.create(document.getElementById('editor'), {
      value: `# Python kodunu buraya yaz\nfor i in range(5):\n    print(i)`,
      language: 'python',
      theme: 'vs-dark',
      automaticLayout: true,
      minimap: { enabled: false }
    });

    // monaco-python autocomplete, lint, hover aktif olur
    window.monacoPython.install(monaco);
  });

  async function loadPyodideAndPackages() {
    pyodide = await loadPyodide();
  }

  async function runPythonCode() {
    const code = editor.getValue();
    try {
      let result = await pyodide.runPythonAsync(code);
      if (result === undefined) result = '(boş çıktı)';
      document.getElementById('output').textContent = result.toString();
    } catch (err) {
      document.getElementById('output').textContent = 'Hata:\n' + err;
    }
  }

  loadPyodideAndPackages();

  document.getElementById('runBtn').addEventListener('click', runPythonCode);

</script>

</body>
</html>
